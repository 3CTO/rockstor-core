<script>
  /*
  * Copyright (c) 2012-2013 RockStor, Inc. <http://rockstor.com>
  * This file is part of RockStor.
  *
  * RockStor is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License as published
  * by the Free Software Foundation; either version 2 of the License,
  * or (at your option) any later version.
  *
  * RockStor is distributed in the hope that it will be useful, but
  * WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  * General Public License for more details.
  *
  * You should have received a copy of the GNU General Public License
  * along with this program. If not, see <http://www.gnu.org/licenses/>.
  *
  */
</script>

<div class="row">
  <div class="col-md-8">
    <div class="panel panel-default">

<div class="panel-heading">Configure <%= service.get('display_name') %></div>

  <div class="panel-body">
      <form class="form-horizontal" id="winbind-form" name="aform">
        <div class="messages"></div>

        <!-- Winbind Domain -->
        <div class="form-group">
          <label class="col-sm-4 control-label" for="domain">Winbind Domain<span class="required"> *</span></label>
          <div class="col-sm-4">
            <input class="form-control" type="text" id="domain" name="domain" value="<%= config.domain %>" placeholder="Domain" >
          </div>
        </div>

        <!-- Security model -->
        <% var securityTypes = ['ads','domain','server','user']; %>
        <div class="form-group">
          <label class="col-sm-4 control-label" for="security">Security Model<span class="required"> *</span></label>
          <div class="col-sm-4">
            <select class="form-control" id="security" name="security">
              <% _.each(securityTypes, function(security, index) { %>
                <% if (security == config.security) { %>
                  <option value="<%= security %>" selected="selected">
                  <%= security %> </option>
                <% } else { %>
                  <option value="<%= security %>"><%= security %> </option>
                <% } %>
              <% }); %>
            </select>
          </div>
        </div>

        <!-- Winbind ADS Realm -->
        <div class="form-group">
          <label class="col-sm-4 control-label" for="realm">Winbind ADS Realm<span class="required"> * </span></label>
          <div class="col-sm-4">
            <% if (config.security == 'ads' || _.isNull(config.security) || _.isUndefined(config.security) ) { %>
              <input class="form-control"type="text" id="realm" name="realm"
              value="<%= config.realm %>" placeholder="Realm">
            <% } else { %>
              <input class="form-control" type="text" id="realm" name="realm"
              disabled="true" value="<%= config.realm %>"
              placeholder="Winbind ADS Realm" >
            <% } %>
          </div>
        </div>

        <!-- Winbind Domain Controllers -->
        <div class="form-group">
          <label class="col-sm-4 control-label" for="controllers">Winbind Domain Controllers<span class="required"> *</span></label>
          <div class="col-sm-4 ">
            <input class="form-control" type="text" id="controllers" name="controllers" value="<%= config.controllers %>" placeholder="Controllers">
          </div>
        </div>

        <!-- Template Shell -->
        <% var templateShells = ['/bin/false', '/bin/sh', '/bin/bash', '/bin/nologin', '/bin/tcsh', '/bin/csh']; %>
        <div class="form-group">
          <label class="col-sm-4 control-label" for="templateshell">Template Shell<span class="required"> *</span></label>
          <div class="col-sm-4 ">
            <% if (config.security == 'ads' || config.security == 'domain' || _.isNull(config.security) || _.isUndefined(config.security))  { %>
              <select class="form-control" id="templateshell" name="templateshell">
                <% _.each(templateShells, function(shell, index) { %>
                  <% if (shell == config.shell) { %>
                    <option value="<%= shell %>" selected="selected">
                    <%= shell %> </option>
                  <% } else { %>
                    <option value="<%= shell %>"><%= shell %> </option>
                  <% } %>
                <% }); %>
              </select>
            <% } else { %>
              <select id="templateshell" name="templateshell" disabled="true">
                <% _.each(templateShells, function(shell, index) { %>
                  <% if (shell == config.shell) { %>
                    <option value="<%= shell %>" selected="selected">
                    <%= shell %> </option>
                  <% } else { %>
                    <option value="<%= shell %>"><%= shell %> </option>
                  <% } %>
                <% }); %>
              </select>
            <% } %>
          </div>
        </div> <!-- form-group -->

        <!-- Offline login -->
        <div class="form-group">
            <% if (config.allow_offline) { %>
              <label class="control-label col-sm-4" for="offline-login"></label>
              <div class="col-sm-4">
                <input type="checkbox" name="allow-offline" id="allow-offline"
              checked="true">
            </div>
            <% } else { %>
              <label class="control-label col-sm-4" for="offline-login"></label>
              <div class="col-sm-4">
                <input type="checkbox" name="allow-offline" id="allow-offline">
            <% } %> Allow Offline login?
              </div>  
        </div>

        <!-- Submit -->
        <div class="form-group">
          <div class="col-sm-8 col-sm-offset-4">
            <button id="cancel" class="btn btn-default">Cancel</button>
            <button type="Submit" id="submit" class="btn btn-primary">Submit</button>
          </div>
        </div>

      </form>

    </div> <!-- panel-body -->
  </div><!--panel-default-->
  </div> <!-- col-md-8 -->
</div> <!-- row -->
