
CMDSCRIPT /usr/bin/upssched-cmd
PIPEFN /var/run/nut/upssched.pipe
LOCKFN /var/run/nut/upssched.lock

# alert when comms bad for more than # seconds
AT COMMBAD * START-TIMER comms-bad 15
AT COMMOK * CANCEL-TIMER comms-bad

# alert when comms ok for at least # seconds
AT COMMOK * START-TIMER comms-ok 60
AT COMMBAD * CANCEL-TIMER comms-ok

# alert if system ONBATT for more than 10 seconds
AT ONBATT * START-TIMER on-batt 10
AT ONLINE * CANCEL-TIMER on-batt

# miscellaneous events unfiltered by timers
# as soon as mains power returns then execute on-mains directive
AT ONLINE * EXECUTE on-mains
AT REPLBATT EXECUTE replace-batt
AT FSD EXECUTE forced-shutdown
AT LOWBATT EXECUTE low-batt
AT NOCOMM EXECUTE no-comms
AT SHUTDOWN EXECUTE shutdown

# remark out these 2 lines to shutdown after # seconds on battery
#AT ONBATT * START-TIMER early-shutdown 120
#AT ONLINE * CANCEL-TIMER early-shutdown
